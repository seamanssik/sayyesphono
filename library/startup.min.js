function getURLVar(e) {
    var t = [], a = String(document.location).split("?");
    if (a[1]) {
        var o = a[1].split("&");
        for (i = 0; i < o.length; i++) {
            var n = o[i].split("=");
            n[0] && n[1] && (t[n[0]] = n[1])
        }
        return t[e] ? t[e] : ""
    }
}
function scrollContent() {
    $(document).height() - $(window).height();
    newScroll = is.desktop() ? $(window).scrollTop() : $("body").scrollTop(), currentScroll = newScroll, $(".js-animate").each(function () {
        var e = $(this);
        newScroll + 1 * $(window).height() > $(this).offset().top ? (e.removeClass("-no-anim"), e.addClass("is-animated")) : newScroll + $(window).height() < $(this).offset().top && (e.addClass("-no-anim"), e.removeClass("is-animated"))
    })
}
function scrollHeader() {
    if (is.desktop() || is.tablet()) {
        var e = $(window).scrollTop();
        parseInt(e) > parseInt($("header").height() + $(".n-container").height()) + 40 ? $(".h-fixed").addClass("show") : $(".h-fixed").removeClass("show")
    }
}
function fixedFooter() {
    var e = _body.find("footer"), t = e.innerHeight(), a = _body.find(".wrapper");
    e.css({height: t}), a.css({"margin-bottom": -parseInt(t)})
}
const _body = $("body");
jQuery.fn.exist = function () {
    var e;
    return e = this.length >= 1 ? !0 : !1
}, $(function () {
    $.datetimepicker.setLocale("ru"), jcf.setOptions("Select", {
        wrapNative: !1,
        wrapNativeOnMobile: !0,
        useCustomScroll: !0,
        maxVisibleItems: 6,
        fakeDropInBody: !1
    }), jcf.replaceAll()
}), $.validator.addMethod("nonNumeric", function (e, t) {
    return this.optional(t) || !isNaN(Number(e))
}, "Only alphabatic characters allowed."), $.validator.addMethod("notNumber", function (e) {
    var t = /[0-9]/;
    return !t.test(e)
}, "Number is not permitted"), $.validator.methods.email = function (e, t) {
    return this.optional(t) || /[-a-zA-Z0-9]+@[-a-zA-Z0-9]+\.[a-z]+/.test(e)
}, $(document).on("click", ".showroom-total__order", function (e) {
    if( $(".photoday-order").exist() ) {
        is.not.mobile() ? $("body").animate({scrollTop: _body.find(".photoday-order").first().offset().top - 90}, "slow") : $("body").animate({scrollTop: _body.find(".photoday-order") .first().offset().top}, "slow"), e.preventDefault()
    }
}), $(window).load(function () {
    var e = _body.find(".photodays-images");
    e.exist() && (is.not.mobile() && is.not.tablet() && e.masonry({
        itemSelector: "li",
        columnWidth: 1
    }), e.magnificPopup({type: "image", delegate: "a", gallery: {enabled: !0}}));
    var t = _body.find("#photodayImages");
    t.exist() && t.magnificPopup({type: "image", delegate: "a", gallery: {enabled: !0}})
}), $(document).ready(function () {
    var e = _body.find("#product");
    if (e.exist()) {
        var t = e.find("#price-buy"), a = t.attr("data-new-price"), o = parseInt(t.attr("data-price"));
        "+" == t.attr("data-prefix") && (o += parseInt(a)), "-" == t.attr("data-prefix") && (o -= parseInt(a)), t.text(o), e.find(".showroom-images").magnificPopup({
            type: "image",
            delegate: "a",
            gallery: {enabled: !0}
        })
    }
    $(document).on("click", "#button-cart", function () {
        $.ajax({
            url: "index.php?route=checkout/cart/add",
            type: "post",
            data: $("#product input[type='text'], #product input[type='hidden'], #product input[type='radio']:checked, #product input[type='checkbox']:checked, #product select, #product textarea"),
            dataType: "json",
            success: function (e) {
                e.success && (_body.find("#modalSuccess .modalSuccess-text").html(e.success), _body.find("#modalSuccess").modal("show"), 
                    _body.find('*[data-toggle="cart-total"]').removeClass("hidden").text(e.total))
                    _body.find('*[data-toggle="cart-total-count"]').removeClass('hidden').text(e.total_items_count);
                    _body.find('*[data-toggle="cart-total-count-2"]').removeClass('hidden').text(e.total_items_count);
            }
        })
    })
}), $(document).ready(function () {
    is.desktop() && ($(window).scroll(function () {
        $(this).scrollTop() > 1000 ? $(".scrollToTop").fadeIn() : $(".scrollToTop").fadeOut()
    }), $(".scrollToTop").click(function () {
        return $("html, body").animate({scrollTop: 0}, 800), !1
    })), (_body.hasClass("account-address-edit") || _body.hasClass("account-register")) && ($("select[name='country_id']").on("change", function () {
        $.ajax({
            url: "index.php?route=account/account/country&country_id=" + this.value,
            dataType: "json",
            beforeSend: function () {
                $("select[name='country_id']").after(' <i class="fa fa-circle-o-notch fa-spin"></i>')
            },
            complete: function () {
                $(".fa-spin").remove()
            },
            success: function (e) {
                if (html = '<option value=""> --- Выберите --- </option>', e.zone && "" != e.zone)for (i = 0; i < e.zone.length; i++)html += '<option value="' + e.zone[i].zone_id + '"', e.zone[i].zone_id == _body.find('input[name="current_zone_id"]').val() && (html += ' selected="selected"'), html += ">" + e.zone[i].name + "</option>"; else html += '<option value="0" selected="selected"> --- Не выбрано --- </option>';
                $("select[name='zone_id']").html(html)
            },
            error: function (e, t, a) {
                alert(a + "\r\n" + e.statusText + "\r\n" + e.responseText)
            }
        })
    }), $("select[name='country_id']").trigger("change"))
}), $(function () {
    var e = $(".page.contact");
    e.exist()
}), $(window).scroll(function () {
    scrollContent(), scrollHeader()
}), $(document).on("click", "#loadReviews", function () {
    alert("load more Reviews")
}), $(document).on("click", '*[data-toggle="openCloseText"]', function () {
    var e = $(this), t = e.attr("data-element"), a = e.attr("data-short"), o = e.attr("data-action"), i = e.attr("data-height");
    e.hasClass("active") ? (e.children("span").text(o), $("#" + t).animate({height: parseInt(i) + "px"}, 1e3)) : (e.children("span").text(a), $("#" + t).animate({height: $("#" + t).children("div").height()}, 1e3)), e.toggleClass("active")
}), $(document).on("click", "#showAside, #showBackdrop, #showClose", function () {
    _body.toggleClass("aside-show"), _body.find(".aside").toggleClass("show")
}), $(document).ready(function () {
    _body.addClass("is-ready"), scrollContent();
    var e = _body.find("#homeSlideShow");
    e.exist() && e.owlCarousel({
        items: 1,
        autoPlay: 6e3,
        singleItem: !0,
        navigation: !0,
        pagination: !0,
        lazyLoad: !0,
        touchDrag: !1,
        mouseDrag: !1,
        addClassActive: !0,
        transitionStyle: "fade"
    });
    var t = _body.find("#photodayStudio");
    t.exist() && t.owlCarousel({
        items: 1,
        autoPlay: 6e3,
        singleItem: !0,
        navigation: !0,
        pagination: !0,
        lazyLoad: !0,
        touchDrag: !1,
        mouseDrag: !1,
        addClassActive: !0,
        transitionStyle: "fade"
    });
    var a = _body.find("#showroom-related");
    a.exist() && a.owlCarousel({
        items: 6,
        itemsDesktop: [1440, 5],
        itemsDesktopSmall: [1199, 5],
        itemsTablet: [992, 4],
        itemsTabletSmall: [768, 3],
        itemsMobile: [479, 2],
        autoPlay: 3e3,
        navigation: !1,
        pagination: !1,
        touchDrag: !0,
        mouseDrag: !0,
        addClassActive: !0,
        transitionStyle: "fade"
    });
    var o = _body.find("#photodayImages");
    o.exist() && o.owlCarousel({
        items: 1,
        autoPlay: 6e3,
        itemsDesktopSmall: [979, 3],
        itemsTablet: [768, 3],
        itemsMobile: [479, 1],
        navigation: !0,
        pagination: !1,
        lazyLoad: !0,
        touchDrag: !0,
        autoHeight: !0,
        mouseDrag: !1,
        addClassActive: !0,
        transitionStyle: "fade",
        navigationText: ["Пред.", "Сдед."]
    });
    var i = _body.find(".legend"), n = i.find(".container");
    n.children().height(n.height());
    var s = _body.find("#bestSlideShow");
    s.exist() && s.owlCarousel({
        items: 1,
        autoPlay: !1,
        singleItem: !0,
        navigation: !0,
        pagination: !0,
        lazyLoad: !0,
        touchDrag: !1,
        mouseDrag: !1,
        addClassActive: !0,
        transitionStyle: "fade"
    });
    var l = _body.find("#photodaysSlideShow");
    l.exist() && l.owlCarousel({
        items: 1,
        autoPlay: !1,
        singleItem: !0,
        navigation: !0,
        pagination: !0,
        lazyLoad: !0,
        touchDrag: !1,
        mouseDrag: !1,
        stopOnHover: !0,
        addClassActive: !0,
        transitionStyle: "fade"
    });
    var r = _body.find("#aboutCarousel");
    r.exist() && r.owlCarousel({
        items: 1,
        autoPlay: !1,
        singleItem: !0,
        navigation: !0,
        pagination: !0,
        lazyLoad: !0,
        touchDrag: !1,
        mouseDrag: !1,
        stopOnHover: !0,
        addClassActive: !0,
        transitionStyle: "fade"
    });
    var d = _body.find("#showroomCarousels");
    d.exist() && d.owlCarousel({
        items: 1,
        autoPlay: !1,
        singleItem: !0,
        navigation: !0,
        pagination: !0,
        lazyLoad: !0,
        mouseDrag: !1,
        autoHeight: !0,
        stopOnHover: !0,
        addClassActive: !0,
        transitionStyle: "fade"
    });
    var c = _body.find("#showroomImages");
    c.exist() && c.owlCarousel({
        items: 1,
        autoPlay: 6e3,
        singleItem: !0,
        navigation: !0,
        pagination: !0,
        lazyLoad: !0,
        touchDrag: !1,
        mouseDrag: !1,
        stopOnHover: !0,
        addClassActive: !0,
        transitionStyle: "fade"
    });
    var u = _body.find("#franchiseCarousel");
    u.exist() && (u.owlCarousel({
        items: 5,
        autoPlay: 3e3,
        navigation: !0,
        pagination: !1
    }), u.magnificPopup({type: "image", delegate: "a", gallery: {enabled: !0}}));
    var p = _body.find("#articleCarousel");
    p.exist() && (p.owlCarousel({
        items: 5,
        autoPlay: 3e3,
        navigation: !0,
        pagination: !1
    }), p.magnificPopup({type: "image", delegate: "a", gallery: {enabled: !0}}))
}), $(window).load(function () {
    var e = _body.find("#legendCarousel");
    if (e.exist()) {
        for (var t = 1; 20 > t; t++)if (_body.find("#legend-images-" + t).exist()) {
            var a = _body.find("#legend-images-" + t);
            a.masonry({itemSelector: "a", columnWidth: 1})
        }
        e.owlCarousel({
            items: 1,
            touchDrag: !1,
            mouseDrag: !1,
            singleItem: !0,
            autoPlay: !1,
            navigation: !0,
            pagination: !0,
            paginationNumbers: !0,
            addClassActive: !0,
            autoHeight: !0,
            transitionStyle: "fade"
        }), e.magnificPopup({type: "image", delegate: "a", gallery: {enabled: !0}})
    }
}), $(window).load(function () {
    _body.addClass("is-load"), setTimeout(function () {
        if (is.desktop()) {
            skrollr.init()
        }
    }, 200);
    var e = _body.find("#homeSlideShow");
    if (e.exist()) {
        var t = e.find(".owl-controls"), a = _body.find(".s-nav__container");
        t.detach().appendTo(a)
    }
    var o = _body.find("#legendCarousel");
    if (o.exist()) {
        var t = o.find(".owl-controls .owl-pagination"), a = _body.find("#legend-control");
        t.detach().appendTo(a),
        //     $.each(o.find('*[data-toggle="legend-item"]'), function (e) {
        //     var t = $(this), o = t.attr("data-year"), i = e + 1;
        //     a.find(".owl-page:nth-child(" + i + ") .owl-numbers").text(o)
        // }),
            $(document).on("click", ".owl-page, .owl-buttons > div", function () {
            for (var e = 0; 20 > e; e++)t.removeClass("active-" + e);
            setTimeout(function () {
                var e = t.find(".owl-page.active").index();
                t.addClass("active-" + e)
            }, 100)
        })
    }
    var i = _body.find("#shop");
    if (_body.hasClass("common-home") && i.exist()) {
        var n = i.find(".shop-description").outerHeight(!1), s = i.find(".shop-description").css("margin-bottom");
        i.find(".shop-col:nth-child(2)").css({"padding-top": parseInt(n) + parseInt(s)})
    }
    var l = _body.find("#photodaysSlideShow");
    if (l.exist()) {
        var t = (_body.find(".photodays-description"), l.find(".owl-controls")), a = _body.find(".photodays-controls");
        t.detach().appendTo(a)
    }
    var r = _body.find("#bestSlideShow");
    r.exist() && setTimeout(function () {
        var e = r.find(".owl-controls"), t = _body.find(".best-controls"), a = _body.find(".best-image__controls").first().offset().top, o = _body.find(".best-image__controls").first().offset().left;
        e.detach().appendTo(t), t.css({left: o, top: a})
    }, 100);
    var d = _body.find("#aboutCarousel");
    d.exist() && setTimeout(function () {
        var e = d.find(".owl-controls"), t = _body.find(".about-carousels__controls"), a = _body.find(".owl-item.active .about-carousel__control").position().top, o = _body.find(".owl-item.active .about-carousel__control").position().left;
        e.detach().appendTo(t), t.css({left: o, top: a})
    }, 100);
    var c = _body.find("#showroomCarousels");
    c.exist() && setTimeout(function () {
        var e = c.find(".owl-controls"), t = _body.find(".showroom-expert__controls");
        e.detach().appendTo(t)
    }, 100);
    var u = _body.find(".faq");
    u.exist() && $(".faq-items").accordion({active: !1, collapsible: !0, heightStyle: "content"});
    var p = $("body.information-contact");
    if (p) {
        var m = p.find(".contact-row");
        m.find(".contact-col").height(m.height());
        var f = function () {
            var e = $("#contactMap"), t = 55.787889, a = 37.582571;
            if (e.length >= 1) {
                var o = new google.maps.LatLng(t, a), i = new google.maps.LatLng(t, a), n = (new google.maps.InfoWindow({content: r}), {
                    zoom: 17,
                    center: i,
                    scrollwheel: !1,
                    navigationControl: !1,
                    mapTypeControl: !1,
                    scaleControl: !1,
                    draggable: !0,
                    mapTypeId: google.maps.MapTypeId.ROADMAP,
                    styles: [{
                        featureType: "all",
                        elementType: "all",
                        stylers: [{saturation: "-100"}]
                    }, {
                        featureType: "administrative",
                        elementType: "all",
                        stylers: [{saturation: "-100"}]
                    }, {
                        featureType: "administrative",
                        elementType: "labels.text.fill",
                        stylers: [{saturation: "-100"}, {lightness: "-30"}, {gamma: "1.00"}]
                    }, {
                        featureType: "administrative.land_parcel",
                        elementType: "all",
                        stylers: [{saturation: "-100"}]
                    }, {
                        featureType: "administrative.land_parcel",
                        elementType: "geometry.stroke",
                        stylers: [{lightness: "0"}, {saturation: "-100"}, {gamma: "1.00"}]
                    }, {
                        featureType: "landscape",
                        elementType: "geometry.fill",
                        stylers: [{color: "#f2f2f2"}]
                    }, {
                        featureType: "landscape.man_made",
                        elementType: "all",
                        stylers: [{hue: "#ff0000"}, {saturation: "-100"}]
                    }, {
                        featureType: "landscape.man_made",
                        elementType: "geometry.stroke",
                        stylers: [{lightness: "-4"}]
                    }, {
                        featureType: "landscape.natural",
                        elementType: "all",
                        stylers: [{saturation: "-100"}]
                    }, {featureType: "poi", elementType: "all", stylers: [{visibility: "off"}]}, {
                        featureType: "poi",
                        elementType: "geometry.fill",
                        stylers: [{saturation: "-100"}, {lightness: "0"}, {gamma: "1.00"}]
                    }, {
                        featureType: "poi.park",
                        elementType: "geometry.fill",
                        stylers: [{visibility: "on"}, {weight: "1"}, {saturation: "-80"}, {lightness: "17"}, {gamma: "1.2"}]
                    }, {
                        featureType: "road",
                        elementType: "all",
                        stylers: [{saturation: -100}, {lightness: 45}]
                    }, {
                        featureType: "road",
                        elementType: "geometry.fill",
                        stylers: [{lightness: "9"}]
                    }, {
                        featureType: "road",
                        elementType: "geometry.stroke",
                        stylers: [{lightness: "0"}, {gamma: "1"}]
                    }, {
                        featureType: "road",
                        elementType: "labels.text.fill",
                        stylers: [{lightness: "-43"}]
                    }, {
                        featureType: "road.highway",
                        elementType: "all",
                        stylers: [{visibility: "simplified"}]
                    }, {
                        featureType: "road.arterial",
                        elementType: "labels.icon",
                        stylers: [{visibility: "off"}]
                    }, {
                        featureType: "transit",
                        elementType: "all",
                        stylers: [{saturation: "-100"}, {lightness: "0"}]
                    }, {
                        featureType: "transit.line",
                        elementType: "all",
                        stylers: [{visibility: "off"}]
                    }, {
                        featureType: "transit.line",
                        elementType: "geometry",
                        stylers: [{lightness: "-50"}, {gamma: "1.00"}, {visibility: "off"}]
                    }, {
                        featureType: "transit.station.airport",
                        elementType: "geometry",
                        stylers: [{saturation: "-77"}, {gamma: "1.79"}, {lightness: "23"}]
                    }, {
                        featureType: "transit.station.bus",
                        elementType: "all",
                        stylers: [{visibility: "off"}]
                    }, {
                        featureType: "transit.station.rail",
                        elementType: "labels.icon",
                        stylers: [{gamma: "1.00"}, {lightness: "40"}, {weight: "1"}, {saturation: "-100"}]
                    }, {
                        featureType: "water",
                        elementType: "all",
                        stylers: [{color: "#f4f4f4"}, {visibility: "on"}]
                    }, {
                        featureType: "water",
                        elementType: "geometry.fill",
                        stylers: [{visibility: "on"}, {lightness: "-20"}, {saturation: "-90"}, {gamma: "1.00"}]
                    }, {
                        featureType: "water",
                        elementType: "labels.text.fill",
                        stylers: [{lightness: "-39"}, {saturation: "-100"}]
                    }, {featureType: "water", elementType: "labels.text.stroke", stylers: [{lightness: "55"}]}]
                }), e = new google.maps.Map(document.getElementById("contactMap"), n), s = "/image/theme/map-marker.png", l = new google.maps.Marker({
                    position: o,
                    map: e,
                    icon: s
                }), r = "";
                l.setMap(e)
            }
        };
        f()
    }
});
var cart = {
    add: function (e, t) {
        $.ajax({
            url: "index.php?route=checkout/cart/add",
            type: "post",
            data: "product_id=" + e + "&quantity=" + ("undefined" != typeof t ? t : 1),
            dataType: "json",
            beforeSend: function () {
                $("#cart > button").button("loading")
            },
            complete: function () {
                $("#cart > button").button("reset")
            },
            success: function (e) {
                $(".alert, .text-danger").remove(), e.redirect && (location = e.redirect), e.success && ($("#content").parent().before('<div class="alert alert-success"><i class="fa fa-check-circle"></i> ' + e.success + ' <button type="button" class="close" data-dismiss="alert">&times;</button></div>'), setTimeout(function () {
                    $("#cart > button").html('<span id="cart-total"><i class="fa fa-shopping-cart"></i> ' + e.total + "</span>")
                }, 100), $("html, body").animate({scrollTop: 0}, "slow"), $("#cart > ul").load("index.php?route=common/cart/info ul li"))
            },
            error: function (e, t, a) {
                alert(a + "\r\n" + e.statusText + "\r\n" + e.responseText)
            }
        })
    }, update: function (e, t) {
        $.ajax({
            url: "index.php?route=checkout/cart/edit",
            type: "post",
            data: "key=" + e + "&quantity=" + ("undefined" != typeof t ? t : 1),
            dataType: "json",
            beforeSend: function () {
                $("#cart > button").button("loading")
            },
            complete: function () {
                $("#cart > button").button("reset")
            },
            success: function (e) {
                setTimeout(function () {
                    $("#cart > button").html('<span id="cart-total"><i class="fa fa-shopping-cart"></i> ' + e.total + "</span>")
                }, 100), "checkout/cart" == getURLVar("route") || "checkout/checkout" == getURLVar("route") ? location = "index.php?route=checkout/cart" : $("#cart > ul").load("index.php?route=common/cart/info ul li")
            },
            error: function (e, t, a) {
                alert(a + "\r\n" + e.statusText + "\r\n" + e.responseText)
            }
        })
    }, remove: function (e) {
        $.ajax({
            url: "index.php?route=checkout/cart/remove",
            type: "post",
            data: "key=" + e,
            dataType: "json",
            beforeSend: function () {
                $("#cart > button").button("loading")
            },
            complete: function () {
                $("#cart > button").button("reset")
            },
            success: function (e) {
                setTimeout(function () {
                    $("#cart > button").html('<span id="cart-total"><i class="fa fa-shopping-cart"></i> ' + e.total + "</span>")
                }, 100), "checkout/cart" == getURLVar("route") || "checkout/checkout" == getURLVar("route") ? location = "index.php?route=checkout/cart" : $("#cart > ul").load("index.php?route=common/cart/info ul li")
            },
            error: function (e, t, a) {
                alert(a + "\r\n" + e.statusText + "\r\n" + e.responseText)
            }
        })
    }
};
$(document).delegate(".agree", "click", function (e) {
    e.preventDefault(), $("#modal-agree").remove();
    var t = this;
    $.ajax({
        url: $(t).attr("href"), type: "get", dataType: "html", success: function (e) {
            html = '<div id="modal-agree" class="modal fade">', html += '  <div class="modal-dialog">', html += '    <div class="modal-content">', html += '      <div class="modal-header">', html += '        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>', html += '        <h4 class="modal-title">' + $(t).text() + "</h4>", html += "      </div>", html += '      <div class="modal-body">' + e + "</div>", html += "    </div", html += "  </div>", html += "</div>", $("body").append(html), $("#modal-agree").modal("show")
        }
    })
});